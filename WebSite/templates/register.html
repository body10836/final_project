<!DOCTYPE html>
<html>

<head>
  <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
  <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <link rel="stylesheet" href="{{url_for('static',filename='/styles/register.css')}}">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.min.js"
    integrity="sha512-WW8/jxkELe2CAiE4LvQfwm1rajOS8PHasCCx+knHG0gBHt8EXxS6T6tJRTGuDQVnluuAvMxWF4j8SNFDKceLFg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"
    integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>

<body>



  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-analytics.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCw5jTOHFYc0sE31RycWo5O2KWCnJpEP-8",
      authDomain: "nextpage-b8d10.firebaseapp.com",
      projectId: "nextpage-b8d10",
      storageBucket: "nextpage-b8d10.appspot.com",
      messagingSenderId: "683648768463",
      appId: "1:683648768463:web:7deb07939391f2f972daba",
      measurementId: "G-2ZQ4V6LBMD"
    };

    import { getDatabase, ref, set, child, get } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";
    import { initializeApp } from "firebase/app";
    import { getAuth } from "firebase/auth";
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth()
    const database = firebase.database()
    const db = getDatabase();
    function register() {
      user = document.getElementById('userReg').value
      email = document.getElementById('emailReg').value
      password = document.getElementById('passReg').value
      if (validate_email(email) == false || validate_password == false) {
        return
      }
      if (validate_field(user) == false) {
        return
      }
      auth.creteUserWithEmailAndPassword(email, password)
        .then(function () {
          var user = auth.currentUser
          var database_ref = database.ref()

          var user_data = {
            email: email,
            full_name: user,
            last_login: Date.now()
          }
          database_ref.child('users/' + user.uid).set






          alert('UserCreated !')

        })
        .catch(function (error) {
          var error_code = error.code
          var error_message = error.message
          alert(error_message)
        })
    }
    function validate_email(email) {
      expressions = /^[^@]+@\w+(\.\w+)+\w$/
      if (expressions.test(email) == true) {
        return true
      }
      else {
        return false
      }

    }
    function validate_password() {
      if (password < 6) {
        return false
      }
      else {
        return true
      }
    }
    function validate_field(field) {
      if (fireld == null) {
        return false
      }
      if (field.length <= 0) {
        return false
      }
      else {
        return true
      }
    }



  </script>
  <div>
    <h3 class="center">Sign Up</h3>
    <input type="text" placeholder="Username" id="userReg" class="form-control mb-3">
    <input type="text" placeholder="Email" id="emailReg" class="form-control mb-3">
    <input type="text" placeholder="Password" id="passReg" class="form-control mb-3">
    <button type="button" class="btn btn-outline-dark" onclick="register()">Sign Up</button>
    <a href="{{ url_for('login') }}" class="badge bg-dark">Have an Account?</a>
  </div>

</body>

</html>